#---------------------------------------------------#
## uclash的配置文件基于clash原有配置，只是增加了use这个关键字
## 来使得配置中可以引用其他位置的配置
## 该示例规则使用： https://github.com/Hackl0us/SS-Rule-Snippet/blob/master/LAZY_RULES/clash.yaml
## clash 配置文档： https://github.com/Dreamacro/clash/wiki/Configuration
#---------------------------------------------------#

# uclash定义一些处理文件需要的属性
parser:
  #文件最终写入的路径，如果使用相对路径为相对于本文件
  destination: "../tmp/0.yml"

proxies:
  # 使用如下链接中包含的节点，可以使用数组，链接如果是github的raw/blob格式会自动转化为githubusercontent格式和一些镜像链接
  - use: "https://github.com/yu-steven/openit/blob/main/Clash.yaml"
    name: "yu-steven/openit"
    #可以定义一些其他属性，他不会被使用，但是可以方便阅读
    homepage: https://doc.openit.ml/
    link: "https://github.com/yu-steven/openit/"

proxy-groups:

  - name: "auto"
    type: url-test
    proxies:
      - use: true
        match: "Http" #使用Proxies中名称包含Http的节点
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: Proxy
    type: select
    proxies:
      - auto
      - use: true
        filter: | #使用下面的javascript代码来过滤节点
         //javascript代码支持val,idx,arr
         console.log(val.name,arr[idx].type)
         if(val.name==="Proxy"||val.name==="auto"||val.name==="Others"||val.name.includes("XSS安全漏洞检测")) return false
         return true
        proxies: false #过滤的对象是否包含代理节点，默认为true
        groups: true #过滤的对象是否包含代理节点组，默认为false

  - name: Others
    type: select
    proxies:
      - DIRECT
      - Proxy
      - auto
  
  - use:
    - https://cdn.jsdelivr.net/gh/git-yusteven/openit@main/Clash.yaml

rules:
  # 自定义规则
  ## 您可以在此处插入您补充的自定义规则（请注意保持缩进）
  - DOMAIN-SUFFIX,mathpix.com,DIRECT
  - DOMAIN-SUFFIX,jable.tv,Proxy
  - DOMAIN-SUFFIX,pornhub.com,Proxy
  - DOMAIN-SUFFIX,telemetr.io,Proxy
  - DOMAIN-SUFFIX,cdn.jsdelivr.net,Proxy
  - DOMAIN-SUFFIX,regex101.com,Proxy
  - DOMAIN-SUFFIX,npmjs.com,Proxy
  - DOMAIN-SUFFIX,azureedge.net,Proxy
  - DOMAIN,t.co,Proxy
  - DOMAIN,edge.activity.windows.com,DIRECT
  - DOMAIN-SUFFIX,bing.com,DIRECT
  - use: https://github.com/Hackl0us/SS-Rule-Snippet/blob/master/LAZY_RULES/clash.yaml
  - MATCH,Others
